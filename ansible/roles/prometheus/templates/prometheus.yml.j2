global:
  scrape_interval: 10s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: "nodes"
    static_configs:
      - targets:
{% for host in groups['runner'] + groups['web'] %}
        - "{{ (hostvars[host]['ansible_host'] | default(host)).split(':')[0] }}:9100"
{% endfor %}


